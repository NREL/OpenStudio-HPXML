<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Construction
  
    &mdash; Documentation by YARD 0.9.16
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Construction";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo;
    
    
    <span class="title">Construction</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Construction
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Construction</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>resources/constructions.rb</dd>
  </dl>
  
</div>








  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_layer-instance_method" title="#add_layer (instance method)">#<strong>add_layer</strong>(materials, name = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assembly_rvalue-instance_method" title="#assembly_rvalue (instance method)">#<strong>assembly_rvalue</strong>(runner)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_and_assign_constructions-instance_method" title="#create_and_assign_constructions (instance method)">#<strong>create_and_assign_constructions</strong>(surfaces, runner, model)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Creates constructions as needed and assigns to surfaces.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(name, path_widths)  &#x21d2; Construction </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Facilitates creating and assigning an OpenStudio construction (with
accompanying OpenStudio Materials) from Material objects.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(name, path_widths)  &#x21d2; <tt><span class='object_link'><a href="" title="Construction (class)">Construction</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Facilitates creating and assigning an OpenStudio construction (with
accompanying OpenStudio Materials) from Material objects. Handles parallel
path calculations.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2117
2118
2119
2120
2121
2122
2123
2124
2125
2126
2127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'resources/constructions.rb', line 2117</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_path_widths'>path_widths</span><span class='rparen'>)</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id identifier rubyid_name'>name</span>
  <span class='ivar'>@path_widths</span> <span class='op'>=</span> <span class='id identifier rubyid_path_widths'>path_widths</span>
  <span class='ivar'>@path_fracs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@sum_path_fracs</span> <span class='op'>=</span> <span class='ivar'>@path_widths</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span><span class='lparen'>(</span><span class='symbol'>:+</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path_widths'>path_widths</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path_width'>path_width</span><span class='op'>|</span>
    <span class='ivar'>@path_fracs</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_path_width'>path_width</span> <span class='op'>/</span> <span class='id identifier rubyid_path_widths'>path_widths</span><span class='period'>.</span><span class='id identifier rubyid_inject'>inject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_sum'>sum</span><span class='comma'>,</span> <span class='id identifier rubyid_n'>n</span><span class='op'>|</span> <span class='id identifier rubyid_sum'>sum</span> <span class='op'>+</span> <span class='id identifier rubyid_n'>n</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='ivar'>@layers_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@layers_materials</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_layer-instance_method">
  
    #<strong>add_layer</strong>(materials, name = nil)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2129
2130
2131
2132
2133
2134
2135
2136
2137
2138
2139
2140
2141
2142
2143
2144
2145
2146
2147
2148
2149
2150
2151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'resources/constructions.rb', line 2129</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_layer'>add_layer</span><span class='lparen'>(</span><span class='id identifier rubyid_materials'>materials</span><span class='comma'>,</span> <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='comment'># materials: Either a Material object or a list of Material objects
</span>  <span class='comment'># include_in_construction: false if the layer that should not be included in the
</span>  <span class='comment'>#                          resulting construction but is used to calculate the
</span>  <span class='comment'>#                          effective R-value.
</span>  <span class='comment'># name: Name of the layer; required if multiple materials are provided. Otherwise the
</span>  <span class='comment'>#       Material.name will be used.
</span>  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_materials'>materials</span><span class='period'>.</span><span class='id identifier rubyid_kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='ivar'>@layers_materials</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_materials'>materials</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='ivar'>@layers_names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>else</span>
      <span class='ivar'>@layers_names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_materials'>materials</span><span class='period'>.</span><span class='id identifier rubyid_name'>name</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='ivar'>@layers_materials</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_materials'>materials</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_name'>name</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='ivar'>@layers_names</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_name'>name</span>
    <span class='kw'>else</span>
      <span class='ivar'>@layers_names</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ParallelMaterial</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="assembly_rvalue-instance_method">
  
    #<strong>assembly_rvalue</strong>(runner)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2153
2154
2155
2156
2157
2158
2159
2160
2161
2162
2163
2164
2165
2166
2167
2168
2169
2170
2171
2172
2173
2174
2175
2176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'resources/constructions.rb', line 2153</span>

<span class='kw'>def</span> <span class='id identifier rubyid_assembly_rvalue'>assembly_rvalue</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='rparen'>)</span>
  <span class='comment'># Calculate overall R-value for assembly
</span>  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_validated?'>validated?</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_u_overall'>u_overall</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='ivar'>@path_fracs</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path_frac'>path_frac</span><span class='comma'>,</span> <span class='id identifier rubyid_path_num'>path_num</span><span class='op'>|</span>
    <span class='comment'># For each parallel path, sum series:
</span>    <span class='id identifier rubyid_r_path'>r_path</span> <span class='op'>=</span> <span class='int'>0</span>
    <span class='ivar'>@layers_materials</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_layer_materials'>layer_materials</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_layer_materials'>layer_materials</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
        <span class='comment'># One material for this layer
</span>        <span class='id identifier rubyid_r_path'>r_path</span> <span class='op'>+=</span> <span class='id identifier rubyid_layer_materials'>layer_materials</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rvalue'>rvalue</span>
      <span class='kw'>else</span>
        <span class='comment'># Multiple parallel materials for this layer, use appropriate one
</span>        <span class='id identifier rubyid_r_path'>r_path</span> <span class='op'>+=</span> <span class='id identifier rubyid_layer_materials'>layer_materials</span><span class='lbracket'>[</span><span class='id identifier rubyid_path_num'>path_num</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_rvalue'>rvalue</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_u_overall'>u_overall</span> <span class='op'>+=</span> <span class='float'>1.0</span> <span class='op'>/</span> <span class='id identifier rubyid_r_path'>r_path</span> <span class='op'>*</span> <span class='id identifier rubyid_path_frac'>path_frac</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_r_overall'>r_overall</span> <span class='op'>=</span> <span class='float'>1.0</span> <span class='op'>/</span> <span class='id identifier rubyid_u_overall'>u_overall</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_r_overall'>r_overall</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_and_assign_constructions-instance_method">
  
    #<strong>create_and_assign_constructions</strong>(surfaces, runner, model)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Creates constructions as needed and assigns to surfaces. Leave name as nil
if the materials (e.g., exterior finish) apply to multiple constructions.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


2180
2181
2182
2183
2184
2185
2186
2187
2188
2189
2190
2191
2192
2193
2194
2195
2196
2197
2198
2199
2200
2201
2202
2203
2204
2205
2206
2207
2208
2209
2210
2211
2212
2213
2214
2215
2216
2217
2218
2219
2220
2221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'resources/constructions.rb', line 2180</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_and_assign_constructions'>create_and_assign_constructions</span><span class='lparen'>(</span><span class='id identifier rubyid_surfaces'>surfaces</span><span class='comma'>,</span> <span class='id identifier rubyid_runner'>runner</span><span class='comma'>,</span> <span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_validated?'>validated?</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Create list of OpenStudio materials
</span>  <span class='id identifier rubyid_materials'>materials</span> <span class='op'>=</span> <span class='id identifier rubyid_construct_materials'>construct_materials</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='comma'>,</span> <span class='id identifier rubyid_runner'>runner</span><span class='rparen'>)</span>

  <span class='comment'># Create OpenStudio construction and assign to surface
</span>  <span class='id identifier rubyid_constr'>constr</span> <span class='op'>=</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='const'>Construction</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_model'>model</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_constr'>constr</span><span class='period'>.</span><span class='id identifier rubyid_setName'>setName</span><span class='lparen'>(</span><span class='ivar'>@name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_constr'>constr</span><span class='period'>.</span><span class='id identifier rubyid_setLayers'>setLayers</span><span class='lparen'>(</span><span class='id identifier rubyid_materials'>materials</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_revconstr'>revconstr</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id identifier rubyid_printed_constr'>printed_constr</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_printed_revconstr'>printed_revconstr</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='comment'># Assign constructions to surfaces
</span>  <span class='id identifier rubyid_surfaces'>surfaces</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_surface'>surface</span><span class='op'>|</span>
    <span class='id identifier rubyid_surface'>surface</span><span class='period'>.</span><span class='id identifier rubyid_setConstruction'>setConstruction</span><span class='lparen'>(</span><span class='id identifier rubyid_constr'>constr</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_printed_constr'>printed_constr</span>
      <span class='id identifier rubyid_print_construction_creation'>print_construction_creation</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='comma'>,</span> <span class='id identifier rubyid_surface'>surface</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_printed_constr'>printed_constr</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_print_construction_assignment'>print_construction_assignment</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='comma'>,</span> <span class='id identifier rubyid_surface'>surface</span><span class='rparen'>)</span>

    <span class='comment'># Assign reverse construction to adjacent surface as needed
</span>    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_surface'>surface</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='const'>SubSurface</span> <span class='kw'>or</span> <span class='id identifier rubyid_surface'>surface</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span> <span class='const'>OpenStudio</span><span class='op'>::</span><span class='const'>Model</span><span class='op'>::</span><span class='const'>InternalMassDefinition</span> <span class='kw'>or</span> <span class='kw'>not</span> <span class='id identifier rubyid_surface'>surface</span><span class='period'>.</span><span class='id identifier rubyid_adjacentSurface'>adjacentSurface</span><span class='period'>.</span><span class='id identifier rubyid_is_initialized'>is_initialized</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_revconstr'>revconstr</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='id identifier rubyid_revconstr'>revconstr</span> <span class='op'>=</span> <span class='id identifier rubyid_constr'>constr</span><span class='period'>.</span><span class='id identifier rubyid_reverseConstruction'>reverseConstruction</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_adjacent_surface'>adjacent_surface</span> <span class='op'>=</span> <span class='id identifier rubyid_surface'>surface</span><span class='period'>.</span><span class='id identifier rubyid_adjacentSurface'>adjacentSurface</span><span class='period'>.</span><span class='id identifier rubyid_get'>get</span>
    <span class='id identifier rubyid_adjacent_surface'>adjacent_surface</span><span class='period'>.</span><span class='id identifier rubyid_setConstruction'>setConstruction</span><span class='lparen'>(</span><span class='id identifier rubyid_revconstr'>revconstr</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='kw'>not</span> <span class='id identifier rubyid_printed_revconstr'>printed_revconstr</span>
      <span class='id identifier rubyid_print_construction_creation'>print_construction_creation</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='comma'>,</span> <span class='id identifier rubyid_adjacent_surface'>adjacent_surface</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_printed_revconstr'>printed_revconstr</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
    <span class='id identifier rubyid_print_construction_assignment'>print_construction_assignment</span><span class='lparen'>(</span><span class='id identifier rubyid_runner'>runner</span><span class='comma'>,</span> <span class='id identifier rubyid_adjacent_surface'>adjacent_surface</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Jan  8 16:00:21 2019 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.16 (ruby-2.2.6).
</div>

    </div>
  </body>
</html>